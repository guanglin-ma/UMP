# UMP Platform Environment Variables
# Copy this file to .env and update with your actual values

# ============================================
# Backend API Configuration
# ============================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_RELOAD=false

# ============================================
# Database Configuration
# ============================================
# PostgreSQL (Transactional Data)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=ump
POSTGRES_PASSWORD=ump_password
POSTGRES_DB=ump

# Redis (Cache)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ClickHouse (Time-Series Data)
CLICKHOUSE_URL=http://localhost:8123
CLICKHOUSE_USER=default
CLICKHOUSE_PASSWORD=
CLICKHOUSE_DB=ump

# ============================================
# Gateway Configuration
# ============================================
GATEWAY_HOST=0.0.0.0
GATEWAY_PORT=8090
GATEWAY_API_KEY=your-api-key-here
GATEWAY_SIGNING_SECRET=your-signing-secret-here
GATEWAY_PUBLISH_ENABLED=true
GATEWAY_PUBLISH_BACKEND=kafka

# ============================================
# Kafka Configuration
# ============================================
KAFKA_BOOTSTRAP_SERVERS=localhost:9092
KAFKA_MAX_RETRIES=3
KAFKA_RETRY_BACKOFF_MS=100
KAFKA_MAX_QUEUE_SIZE=10000
KAFKA_DLQ_TOPIC_TEMPLATE=ump.{tenant}.data.telemetry.dlt.v1

# ============================================
# MQTT Configuration
# ============================================
MQTT_HOST=localhost
MQTT_PORT=8883
MQTT_CAFILE=infra/mqtt/certs/ca.crt
MQTT_CERT=infra/mqtt/certs/client.crt
MQTT_KEY=infra/mqtt/certs/client.key

# ============================================
# Authentication & Authorization
# ============================================
# Keycloak OIDC
KEYCLOAK_URL=http://localhost:8080
KEYCLOAK_REALM=ump
KEYCLOAK_CLIENT_ID=ump-api
KEYCLOAK_CLIENT_SECRET=your-client-secret-here

# Development Mode (bypasses authentication)
DEV_MODE=false

# ============================================
# Schema Registry
# ============================================
SCHEMA_REGISTRY_URL=http://localhost:8081

# ============================================
# Observability
# ============================================
# Prometheus
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# Logging
LOG_LEVEL=INFO
LOG_FORMAT=json

# ============================================
# Feature Flags
# ============================================
ENABLE_CACHE=true
ENABLE_METRICS=true
ENABLE_AUDIT=true

# ============================================
# Performance Tuning
# ============================================
# Cache
CACHE_TTL=3600
CACHE_MAX_SIZE=10000

# Database Connection Pool
POSTGRES_POOL_SIZE=10
POSTGRES_MAX_OVERFLOW=20
REDIS_POOL_SIZE=10

# ============================================
# Security
# ============================================
# CORS
CORS_ORIGINS=http://localhost:3000,http://localhost:3001
CORS_ALLOW_CREDENTIALS=true

# Rate Limiting
RATE_LIMIT_PER_MIN=120
RATE_LIMIT_PER_HOUR=10000

# ============================================
# Data Bus Configuration
# ============================================
# Ingest Service
INGEST_BATCH_SIZE=100
INGEST_BATCH_TIMEOUT_SEC=5
INGEST_KAFKA_TOPIC=ump.{tenant}.data.telemetry.v1

# Rules Engine
RULES_ENGINE_KAFKA_TOPIC=ump.{tenant}.data.telemetry.clean.v1
RULES_ENGINE_API_URL=http://localhost:8000

# ============================================
# OTA Configuration
# ============================================
OTA_STORAGE_TYPE=s3
OTA_S3_BUCKET=ump-ota
OTA_S3_REGION=us-east-1
OTA_S3_ACCESS_KEY=
OTA_S3_SECRET_KEY=

# ============================================
# AI Pipeline Configuration
# ============================================
AI_MODEL_PATH=models/
AI_FEATURE_STORE_PATH=features/
AI_TRAINING_DATA_PATH=data/training/

# ============================================
# Environment-Specific Overrides
# ============================================
# Development
# DEV_MODE=true
# LOG_LEVEL=DEBUG

# Staging
# LOG_LEVEL=INFO
# CORS_ORIGINS=https://staging.ump.example.com

# Production
# LOG_LEVEL=WARNING
# CORS_ORIGINS=https://ump.example.com
# DEV_MODE=false
